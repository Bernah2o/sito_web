<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>EducAgua DH2OCOL - Educaci贸n sobre Agua Potable en Valledupar</title>
    <meta
      name="description"
      content="EducAgua DH2OCOL: Programa educativo sobre agua potable, conservaci贸n y calidad del agua en Valledupar. Aprende sobre el cuidado del agua con DH2OCOL Colombia."
    />
    <meta
      name="keywords"
      content="educaci贸n agua potable, conservaci贸n agua, calidad agua, EducAgua, DH2OCOL, Valledupar, educaci贸n ambiental"
    />

    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <!-- Font Awesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <!-- Animate.css -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"
    />
    <!-- Custom CSS -->
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/base.css') }}"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/chatbot.css') }}"
    />
    
    <!-- reCAPTCHA v3 -->
    {% if recaptcha_site_key %}
<script src="https://www.google.com/recaptcha/api.js?render={{ recaptcha_site_key }}"></script>
{% endif %}
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='favicon.ico') }}">
    <link rel="shortcut icon" type="image/x-icon" href="{{ url_for('static', filename='favicon.ico') }}">
    <link rel="icon" type="image/png" sizes="32x32" href="{{ url_for('static', filename='img/logo.png') }}">
    <link rel="icon" type="image/png" sizes="16x16" href="{{ url_for('static', filename='img/logo.png') }}">
    <link rel="apple-touch-icon" href="{{ url_for('static', filename='img/logo.png') }}">

    <style>
      .hero-section {
        background: linear-gradient(135deg, #00b4db 0%, #0083b0 100%);
        color: white;
        padding: 100px 0;
        text-align: center;
      }

      .section-title {
        color: #0083b0;
        font-weight: bold;
        margin-bottom: 3rem;
        text-align: center;
      }

      .education-card {
        border: none;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        height: 100%;
        border-radius: 15px;
        overflow: hidden;
      }

      .education-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 15px rgba(0, 0, 0, 0.2);
      }

      .icon-circle {
        width: 80px;
        height: 80px;
        border-radius: 50%;
        background: linear-gradient(135deg, #00b4db 0%, #0083b0 100%);
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto 1rem;
        color: white;
        font-size: 2rem;
      }

      .tip-card {
        background: #f8f9fa;
        border-left: 4px solid #00b4db;
        padding: 1.5rem;
        margin-bottom: 1rem;
        border-radius: 0 10px 10px 0;
      }

      .fact-box {
        background: linear-gradient(135deg, #00b4db 0%, #0083b0 100%);
        color: white;
        padding: 2rem;
        border-radius: 15px;
        text-align: center;
        margin-bottom: 2rem;
      }

      .btn-primary-custom {
        background: linear-gradient(135deg, #00b4db 0%, #0083b0 100%);
        border: none;
        padding: 12px 30px;
        border-radius: 25px;
        font-weight: bold;
        transition: all 0.3s ease;
      }

      .btn-primary-custom:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(0, 180, 219, 0.4);
      }

      .quiz-section {
        background: #f8f9fa;
        padding: 60px 0;
      }

      .timeline {
        position: relative;
        padding-left: 3rem;
      }

      .timeline::before {
        content: "";
        position: absolute;
        left: 1rem;
        top: 0;
        bottom: 0;
        width: 2px;
        background: #00b4db;
      }

      .timeline-item {
        position: relative;
        margin-bottom: 2rem;
      }

      .timeline-item::before {
        content: "";
        position: absolute;
        left: -2.5rem;
        top: 0.5rem;
        width: 1rem;
        height: 1rem;
        border-radius: 50%;
        background: #00b4db;
      }

      .water-cycle {
        background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
        padding: 60px 0;
      }
    </style>
  </head>
  <body>
    <!-- Navigation -->
    <nav
      class="navbar navbar-expand-lg navbar-light bg-white shadow-sm fixed-top"
    >
      <div class="container">
        <a class="navbar-brand" href="{{ url_for('main.index') }}">
          <img
            src="{{ url_for('static', filename='img/logo.png') }}"
            alt="DH2OCOL Colombia"
            height="40"
          />
        </a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNav"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav ms-auto">
            <li class="nav-item">
              <a class="nav-link" href="{{ url_for('main.index') }}">Inicio</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="{{ url_for('main.index') }}#servicios"
                >Servicios</a
              >
            </li>
            <li class="nav-item">
              <a
                class="nav-link"
                href="{{ url_for('main.accesorios_tanques') }}"
                >Accesorios</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link active" href="{{ url_for('main.educagua') }}"
                >EducAgua</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link" href="{{ url_for('main.index') }}#contacto"
                >Contacto</a
              >
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero-section">
      <div class="container">
        <div class="row">
          <div class="col-lg-8 mx-auto">
            <h1 class="display-4 fw-bold mb-4 text-white">
              <i class="fas fa-graduation-cap me-3 text-white"></i>EducAgua DH2OCOL
            </h1>
            <p class="lead mb-4">
              Programa educativo sobre agua potable, conservaci贸n y calidad del
              agua. Aprende todo sobre el recurso m谩s valioso de nuestro planeta
              y c贸mo cuidarlo para las futuras generaciones.
            </p>
            <a href="#educacion" class="btn btn-light btn-lg"
              >Comenzar a Aprender</a
            >
          </div>
        </div>
      </div>
    </section>

    <!-- Water Facts Section -->
    <section class="py-5">
      <div class="container">
        <div class="row">
          <div class="col-lg-4 mb-4">
            <div class="fact-box">
              <h2 class="display-4 fw-bold text-white">71%</h2>
              <p class="mb-0">
                de la superficie terrestre est谩 cubierta por agua
              </p>
            </div>
          </div>
          <div class="col-lg-4 mb-4">
            <div class="fact-box">
              <h2 class="display-4 fw-bold text-white">2.5%</h2>
              <p class="mb-0">del agua del planeta es agua dulce</p>
            </div>
          </div>
          <div class="col-lg-4 mb-4">
            <div class="fact-box">
              <h2 class="display-4 fw-bold text-white">0.3%</h2>
              <p class="mb-0">
                del agua dulce es accesible para consumo humano
              </p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Education Modules Section -->
    <section id="educacion" class="py-5 bg-light">
      <div class="container">
        <h2 class="section-title">M贸dulos Educativos</h2>
        <div class="row">
          <div class="col-lg-4 col-md-6 mb-4">
            <div class="card education-card">
              <div class="card-body text-center p-4">
                <div class="icon-circle">
                  <i class="fas fa-tint"></i>
                </div>
                <h4>驴Qu茅 es el Agua Potable?</h4>
                <p>
                  Aprende sobre las caracter铆sticas del agua potable, los
                  est谩ndares de calidad y por qu茅 es esencial para la salud
                  humana.
                </p>
                <ul class="list-unstyled text-start">
                  <li>
                    <i class="fas fa-check text-success me-2"></i>Definici贸n de
                    agua potable
                  </li>
                  <li>
                    <i class="fas fa-check text-success me-2"></i>Par谩metros de
                    calidad
                  </li>
                  <li>
                    <i class="fas fa-check text-success me-2"></i>Importancia
                    para la salud
                  </li>
                </ul>
              </div>
            </div>
          </div>

          <div class="col-lg-4 col-md-6 mb-4">
            <div class="card education-card">
              <div class="card-body text-center p-4">
                <div class="icon-circle">
                  <i class="fas fa-recycle"></i>
                </div>
                <h4>Ciclo del Agua</h4>
                <p>
                  Descubre c贸mo funciona el ciclo natural del agua y su
                  importancia para mantener el equilibrio en nuestro planeta.
                </p>
                <ul class="list-unstyled text-start">
                  <li>
                    <i class="fas fa-check text-success me-2"></i>Evaporaci贸n y
                    condensaci贸n
                  </li>
                  <li>
                    <i class="fas fa-check text-success me-2"></i>Precipitaci贸n
                    e infiltraci贸n
                  </li>
                  <li>
                    <i class="fas fa-check text-success me-2"></i>Escorrent铆a y
                    almacenamiento
                  </li>
                </ul>
              </div>
            </div>
          </div>

          <div class="col-lg-4 col-md-6 mb-4">
            <div class="card education-card">
              <div class="card-body text-center p-4">
                <div class="icon-circle">
                  <i class="fas fa-leaf"></i>
                </div>
                <h4>Conservaci贸n del Agua</h4>
                <p>
                  Conoce t茅cnicas y h谩bitos para conservar el agua en el hogar,
                  la escuela y la comunidad.
                </p>
                <ul class="list-unstyled text-start">
                  <li>
                    <i class="fas fa-check text-success me-2"></i>Uso eficiente
                    en el hogar
                  </li>
                  <li>
                    <i class="fas fa-check text-success me-2"></i>Recolecci贸n de
                    agua lluvia
                  </li>
                  <li>
                    <i class="fas fa-check text-success me-2"></i>Reutilizaci贸n
                    responsable
                  </li>
                </ul>
              </div>
            </div>
          </div>

          <div class="col-lg-4 col-md-6 mb-4">
            <div class="card education-card">
              <div class="card-body text-center p-4">
                <div class="icon-circle">
                  <i class="fas fa-flask"></i>
                </div>
                <h4>Tratamiento del Agua</h4>
                <p>
                  Entiende los procesos de tratamiento que hacen que el agua sea
                  segura para el consumo humano.
                </p>
                <ul class="list-unstyled text-start">
                  <li>
                    <i class="fas fa-check text-success me-2"></i>Filtraci贸n y
                    sedimentaci贸n
                  </li>
                  <li>
                    <i class="fas fa-check text-success me-2"></i>Desinfecci贸n y
                    cloraci贸n
                  </li>
                  <li>
                    <i class="fas fa-check text-success me-2"></i>Control de
                    calidad
                  </li>
                </ul>
              </div>
            </div>
          </div>

          <div class="col-lg-4 col-md-6 mb-4">
            <div class="card education-card">
              <div class="card-body text-center p-4">
                <div class="icon-circle">
                  <i class="fas fa-home"></i>
                </div>
                <h4>Almacenamiento Dom茅stico</h4>
                <p>
                  Aprende las mejores pr谩cticas para almacenar agua de forma
                  segura en tanques elevados y cisternas.
                </p>
                <ul class="list-unstyled text-start">
                  <li>
                    <i class="fas fa-check text-success me-2"></i>Tipos de
                    tanques
                  </li>
                  <li>
                    <i class="fas fa-check text-success me-2"></i>Limpieza y
                    mantenimiento
                  </li>
                  <li>
                    <i class="fas fa-check text-success me-2"></i>Prevenci贸n de
                    contaminaci贸n
                  </li>
                </ul>
              </div>
            </div>
          </div>

          <div class="col-lg-4 col-md-6 mb-4">
            <div class="card education-card">
              <div class="card-body text-center p-4">
                <div class="icon-circle">
                  <i class="fas fa-exclamation-triangle"></i>
                </div>
                <h4>Contaminaci贸n del Agua</h4>
                <p>
                  Identifica las principales fuentes de contaminaci贸n del agua y
                  c贸mo prevenirlas en tu comunidad.
                </p>
                <ul class="list-unstyled text-start">
                  <li>
                    <i class="fas fa-check text-success me-2"></i>Fuentes de
                    contaminaci贸n
                  </li>
                  <li>
                    <i class="fas fa-check text-success me-2"></i>Efectos en la
                    salud
                  </li>
                  <li>
                    <i class="fas fa-check text-success me-2"></i>Medidas
                    preventivas
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Water Cycle Detailed Section -->
    <section class="water-cycle">
      <div class="container">
        <h2 class="section-title">El Ciclo del Agua Explicado</h2>
        <div class="row align-items-center">
          <div class="col-lg-6">
            <div class="timeline">
              <div class="timeline-item">
                <h5><i class="fas fa-sun text-warning me-2"></i>Evaporaci贸n</h5>
                <p>
                  El sol calienta el agua de oc茅anos, r铆os y lagos,
                  convirti茅ndola en vapor que asciende a la atm贸sfera.
                </p>
              </div>
              <div class="timeline-item">
                <h5>
                  <i class="fas fa-cloud text-primary me-2"></i>Condensaci贸n
                </h5>
                <p>
                  El vapor de agua se enfr铆a en la atm贸sfera y se condensa
                  formando peque帽as gotas que crean las nubes.
                </p>
              </div>
              <div class="timeline-item">
                <h5>
                  <i class="fas fa-cloud-rain text-info me-2"></i>Precipitaci贸n
                </h5>
                <p>
                  Las gotas de agua en las nubes se unen hasta ser lo
                  suficientemente pesadas para caer como lluvia, nieve o
                  granizo.
                </p>
              </div>
              <div class="timeline-item">
                <h5>
                  <i class="fas fa-mountain text-success me-2"></i>Escorrent铆a
                </h5>
                <p>
                  El agua fluye por la superficie terrestre hacia r铆os, lagos y
                  oc茅anos, completando el ciclo.
                </p>
              </div>
              <div class="timeline-item">
                <h5>
                  <i class="fas fa-seedling text-success me-2"></i>Infiltraci贸n
                </h5>
                <p>
                  Parte del agua se filtra en el suelo, recargando los acu铆feros
                  subterr谩neos.
                </p>
              </div>
            </div>
          </div>
          <div class="col-lg-6 text-center">
            <div class="bg-white p-4 rounded-3 shadow">
              <h4 class="mb-3">Datos Importantes</h4>
              <div class="row">
                <div class="col-6 mb-3">
                  <div class="text-primary">
                    <i class="fas fa-thermometer-half fa-2x mb-2"></i>
                    <h6>Temperatura</h6>
                    <small
                      >El agua se evapora a cualquier temperatura, pero m谩s
                      r谩pido con calor</small
                    >
                  </div>
                </div>
                <div class="col-6 mb-3">
                  <div class="text-info">
                    <i class="fas fa-clock fa-2x mb-2"></i>
                    <h6>Tiempo</h6>
                    <small
                      >Una gota de agua puede tardar d铆as o a帽os en completar el
                      ciclo</small
                    >
                  </div>
                </div>
                <div class="col-6 mb-3">
                  <div class="text-success">
                    <i class="fas fa-globe fa-2x mb-2"></i>
                    <h6>Global</h6>
                    <small
                      >El ciclo del agua ocurre en todo el planeta
                      simult谩neamente</small
                    >
                  </div>
                </div>
                <div class="col-6 mb-3">
                  <div class="text-warning">
                    <i class="fas fa-balance-scale fa-2x mb-2"></i>
                    <h6>Equilibrio</h6>
                    <small
                      >La cantidad total de agua en la Tierra permanece
                      constante</small
                    >
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Conservation Tips Section -->
    <section class="py-5">
      <div class="container">
        <h2 class="section-title">Consejos para Conservar el Agua</h2>
        <div class="row">
          <div class="col-lg-6">
            <div class="tip-card">
              <h5><i class="fas fa-shower text-primary me-2"></i>En el Ba帽o</h5>
              <ul class="mb-0">
                <li>Toma duchas cortas (m谩ximo 5 minutos)</li>
                <li>Cierra la llave mientras te enjabonas</li>
                <li>Repara las fugas inmediatamente</li>
                <li>Usa inodoros de bajo consumo</li>
              </ul>
            </div>

            <div class="tip-card">
              <h5>
                <i class="fas fa-utensils text-primary me-2"></i>En la Cocina
              </h5>
              <ul class="mb-0">
                <li>Lava los platos en un recipiente, no bajo la llave</li>
                <li>Usa el lavavajillas solo cuando est茅 lleno</li>
                <li>
                  Reutiliza el agua de cocinar vegetales para regar plantas
                </li>
                <li>Mant茅n una jarra de agua fr铆a en el refrigerador</li>
              </ul>
            </div>
          </div>

          <div class="col-lg-6">
            <div class="tip-card">
              <h5>
                <i class="fas fa-seedling text-primary me-2"></i>En el Jard铆n
              </h5>
              <ul class="mb-0">
                <li>Riega temprano en la ma帽ana o al atardecer</li>
                <li>Usa plantas nativas que requieren menos agua</li>
                <li>Instala sistemas de riego por goteo</li>
                <li>Recolecta agua de lluvia en recipientes</li>
              </ul>
            </div>

            <div class="tip-card">
              <h5><i class="fas fa-home text-primary me-2"></i>En General</h5>
              <ul class="mb-0">
                <li>Revisa regularmente tuber铆as y grifos</li>
                <li>Instala dispositivos ahorradores de agua</li>
                <li>Educa a tu familia sobre la conservaci贸n</li>
                <li>Reporta fugas en espacios p煤blicos</li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Quiz Section -->
    <section class="quiz-section">
      <div class="container">
        <h2 class="section-title">Pon a Prueba tus Conocimientos</h2>
        <div class="row">
          <div class="col-lg-8 mx-auto">
            <div class="card">
              <div class="card-body p-4">
                <h4 class="text-center mb-4">
                  <i class="fas fa-question-circle text-primary"></i>
                  Quiz R谩pido sobre el Agua
                </h4>

                <form id="quiz-form">
                  {% if preguntas %}
                    {% for pregunta in preguntas %}
                    <div class="quiz-question mb-4" data-question="{{ loop.index }}" data-correct="{{ pregunta.respuesta_correcta }}">
                      <h6 class="fw-bold">
                        {{ loop.index }}. {{ pregunta.pregunta }}
                      </h6>
                      <div class="form-check">
                        <input
                          class="form-check-input"
                          type="radio"
                          name="q{{ loop.index }}"
                          id="q{{ loop.index }}a"
                          value="a"
                        />
                        <label class="form-check-label" for="q{{ loop.index }}a">{{ pregunta.opcion_a }}</label>
                      </div>
                      <div class="form-check">
                        <input
                          class="form-check-input"
                          type="radio"
                          name="q{{ loop.index }}"
                          id="q{{ loop.index }}b"
                          value="b"
                        />
                        <label class="form-check-label" for="q{{ loop.index }}b">{{ pregunta.opcion_b }}</label>
                      </div>
                      <div class="form-check">
                        <input
                          class="form-check-input"
                          type="radio"
                          name="q{{ loop.index }}"
                          id="q{{ loop.index }}c"
                          value="c"
                        />
                        <label class="form-check-label" for="q{{ loop.index }}c">{{ pregunta.opcion_c }}</label>
                      </div>
                      
                      <!-- Feedback de respuesta -->
                      <div class="question-feedback mt-2" style="display: none;">
                        <div class="alert alert-success correct-feedback" style="display: none;">
                          <i class="fas fa-check-circle"></i>
                          <strong>隆Correcto!</strong>
                          {% if pregunta.explicacion %}
                            <br><small>{{ pregunta.explicacion }}</small>
                          {% endif %}
                        </div>
                        <div class="alert alert-danger incorrect-feedback" style="display: none;">
                          <i class="fas fa-times-circle"></i>
                          <strong>Incorrecto.</strong> La respuesta correcta es: 
                          <strong>
                            {% if pregunta.respuesta_correcta == 'a' %}{{ pregunta.opcion_a }}{% endif %}
                            {% if pregunta.respuesta_correcta == 'b' %}{{ pregunta.opcion_b }}{% endif %}
                            {% if pregunta.respuesta_correcta == 'c' %}{{ pregunta.opcion_c }}{% endif %}
                          </strong>
                          {% if pregunta.explicacion %}
                            <br><small>{{ pregunta.explicacion }}</small>
                          {% endif %}
                        </div>
                      </div>
                    </div>
                    {% endfor %}
                  {% else %}
                    <div class="text-center py-4">
                      <i class="fas fa-exclamation-triangle text-warning fa-2x mb-3"></i>
                      <p class="text-muted">No hay preguntas disponibles en este momento.</p>
                    </div>
                  {% endif %}

                  <!-- Aceptaci贸n de Pol铆tica de Privacidad -->
                  <div class="form-check mt-3">
                    <input class="form-check-input" type="checkbox" id="acepta_politica_quiz" required>
                    <label class="form-check-label" for="acepta_politica_quiz">
                      Acepto la
                      <a href="{{ url_for('main.descargar_politica') }}" target="_blank">Pol铆tica de Privacidad y Tratamiento de Datos Personales</a>.
                    </label>
                  </div>
                  <div id="policy-error" class="text-danger small mt-2" style="display: none;">Debes aceptar la Pol铆tica de Privacidad para continuar.</div>
                </form>

                {% if preguntas %}
                <div class="text-center">
                  <button class="btn btn-primary-custom btn-lg" id="check-quiz-btn" onclick="checkQuiz()">
                    <i class="fas fa-check"></i> Verificar Respuestas
                  </button>
                  <button class="btn btn-secondary btn-lg" id="reset-quiz-btn" onclick="resetQuiz()" style="display: none;">
                    <i class="fas fa-redo"></i> Intentar de Nuevo
                  </button>
                </div>

                <!-- Resultado general del quiz -->
                <div id="quiz-summary" class="mt-4" style="display: none;">
                  <div class="card border-0">
                    <div class="card-body text-center">
                      <div id="score-animation" class="mb-3">
                        <i class="fas fa-trophy fa-3x text-warning"></i>
                      </div>
                      <h5 id="score-text" class="mb-2"></h5>
                      <p id="score-message" class="text-muted"></p>
                      <div class="progress mb-3" style="height: 10px;">
                        <div id="score-progress" class="progress-bar bg-success" role="progressbar" style="width: 0%"></div>
                      </div>
                    </div>
                  </div>
                </div>
                {% endif %}
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- CTA Section -->
    <section class="py-5 bg-primary text-white">
      <div class="container">
        <div class="row">
          <div class="col-lg-8 mx-auto text-center">
            <h2 class="mb-4">驴Quieres Saber M谩s?</h2>
            <p class="lead mb-4">
              nete a nuestro programa EducAgua y recibe contenido educativo
              regular sobre el cuidado del agua y el medio ambiente.
            </p>
            <div
              class="d-flex flex-column flex-md-row gap-3 justify-content-center"
            >
              <a
                href="https://api.whatsapp.com/send?phone={{ configuracion.whatsapp or '573015551234' }}&text=Hola, quiero unirme al programa EducAgua DH2OCOL"
                class="btn btn-light btn-lg"
                target="_blank"
              >
                <i class="fab fa-whatsapp me-2"></i>Unirse a EducAgua
              </a>
              <a
                href="{{ url_for('main.index') }}#contacto"
                class="btn btn-outline-light btn-lg"
              >
                <i class="fas fa-envelope me-2"></i>M谩s Informaci贸n
              </a>
            </div>
          </div>
        </div>
      </div>
    </section>

    {% include 'sitio/partials/footer.html' %}

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Contador de Visitantes -->
    <script src="{{ url_for('static', filename='js/visitor_counter.js') }}"></script>

    <script>
      function checkQuiz() {
        // Validar aceptaci贸n de pol铆tica
        const policyCheckbox = document.getElementById('acepta_politica_quiz');
        const policyError = document.getElementById('policy-error');
        if (policyCheckbox && !policyCheckbox.checked) {
          if (policyError) {
            policyError.style.display = 'block';
            policyError.classList.add('animate__animated', 'animate__shakeX');
          }
          policyCheckbox.focus();
          return; // No continuar si no acepta
        } else if (policyError) {
          policyError.style.display = 'none';
        }

        const questions = document.querySelectorAll('.quiz-question');
        let correctAnswers = 0;
        let totalQuestions = questions.length;
        
        // Verificar cada pregunta
        questions.forEach((question, index) => {
          const questionNumber = index + 1;
          const correctAnswer = question.dataset.correct;
          const selectedAnswer = document.querySelector(`input[name="q${questionNumber}"]:checked`);
          const feedback = question.querySelector('.question-feedback');
          const correctFeedback = question.querySelector('.correct-feedback');
          const incorrectFeedback = question.querySelector('.incorrect-feedback');
          
          // Mostrar feedback
          feedback.style.display = 'block';
          
          if (selectedAnswer && selectedAnswer.value === correctAnswer) {
            // Respuesta correcta
            correctAnswers++;
            correctFeedback.style.display = 'block';
            incorrectFeedback.style.display = 'none';
            
            // Animaci贸n de 茅xito
            question.classList.add('animate__animated', 'animate__pulse');
            correctFeedback.classList.add('animate__animated', 'animate__bounceIn');
            
            // Efecto de confeti para respuestas correctas
            createConfetti(question);
            
          } else {
            // Respuesta incorrecta o no seleccionada
            correctFeedback.style.display = 'none';
            incorrectFeedback.style.display = 'block';
            incorrectFeedback.classList.add('animate__animated', 'animate__shakeX');
          }
        });
        
        // Mostrar resultado general
        showQuizSummary(correctAnswers, totalQuestions);
        
        // Cambiar botones
        document.getElementById('check-quiz-btn').style.display = 'none';
        document.getElementById('reset-quiz-btn').style.display = 'inline-block';
      }
      
      function resetQuiz() {
        // Limpiar selecciones
        const radioButtons = document.querySelectorAll('input[type="radio"]');
        radioButtons.forEach(radio => radio.checked = false);
        
        // Ocultar feedback
        const feedbacks = document.querySelectorAll('.question-feedback');
        feedbacks.forEach(feedback => feedback.style.display = 'none');
        
        // Limpiar animaciones
        const questions = document.querySelectorAll('.quiz-question');
        questions.forEach(question => {
          question.classList.remove('animate__animated', 'animate__pulse');
        });
        
        // Ocultar resumen
        document.getElementById('quiz-summary').style.display = 'none';
        
        // Cambiar botones
        document.getElementById('check-quiz-btn').style.display = 'inline-block';
        document.getElementById('reset-quiz-btn').style.display = 'none';
      }
      
      function showQuizSummary(correct, total) {
        const summary = document.getElementById('quiz-summary');
        const scoreText = document.getElementById('score-text');
        const scoreMessage = document.getElementById('score-message');
        const scoreProgress = document.getElementById('score-progress');
        const scoreAnimation = document.getElementById('score-animation');
        
        const percentage = Math.round((correct / total) * 100);
        
        // Actualizar textos
        scoreText.textContent = `${correct} de ${total} respuestas correctas (${percentage}%)`;
        
        // Mensajes motivacionales
        let message = '';
        let icon = '';
        let progressColor = '';
        
        if (percentage === 100) {
          message = '隆Excelente! Eres un experto en agua potable ';
          icon = '<i class="fas fa-trophy fa-3x text-warning animate__animated animate__bounce"></i>';
          progressColor = 'bg-success';
          playSuccessSound();
        } else if (percentage >= 70) {
          message = '隆Muy bien! Tienes buenos conocimientos sobre el agua ';
          icon = '<i class="fas fa-medal fa-3x text-success animate__animated animate__tada"></i>';
          progressColor = 'bg-success';
        } else if (percentage >= 50) {
          message = 'Buen intento. Sigue aprendiendo sobre el agua ';
          icon = '<i class="fas fa-thumbs-up fa-3x text-info animate__animated animate__heartBeat"></i>';
          progressColor = 'bg-info';
        } else {
          message = 'Te recomendamos revisar la informaci贸n sobre agua potable ';
          icon = '<i class="fas fa-book fa-3x text-primary animate__animated animate__pulse"></i>';
          progressColor = 'bg-warning';
        }
        
        scoreMessage.textContent = message;
        scoreAnimation.innerHTML = icon;
        scoreProgress.className = `progress-bar ${progressColor}`;
        
        // Animar barra de progreso
        setTimeout(() => {
          scoreProgress.style.width = percentage + '%';
        }, 500);
        
        // Mostrar resumen con animaci贸n
        summary.style.display = 'block';
        summary.classList.add('animate__animated', 'animate__fadeInUp');
        summary.scrollIntoView({ behavior: 'smooth' });
      }
      
      function createConfetti(element) {
        // Crear efecto de confeti simple
        for (let i = 0; i < 10; i++) {
          const confetti = document.createElement('div');
          confetti.style.position = 'absolute';
          confetti.style.width = '10px';
          confetti.style.height = '10px';
          confetti.style.backgroundColor = ['#ff6b6b', '#4ecdc4', '#45b7d1', '#96ceb4', '#feca57'][Math.floor(Math.random() * 5)];
          confetti.style.borderRadius = '50%';
          confetti.style.pointerEvents = 'none';
          confetti.style.zIndex = '1000';
          
          const rect = element.getBoundingClientRect();
          confetti.style.left = (rect.left + Math.random() * rect.width) + 'px';
          confetti.style.top = (rect.top + Math.random() * rect.height) + 'px';
          
          document.body.appendChild(confetti);
          
          // Animar confeti
          confetti.animate([
            { transform: 'translateY(0px) rotate(0deg)', opacity: 1 },
            { transform: 'translateY(-100px) rotate(360deg)', opacity: 0 }
          ], {
            duration: 1000,
            easing: 'ease-out'
          }).onfinish = () => confetti.remove();
        }
      }
      
      function playSuccessSound() {
        // Crear un sonido de 茅xito simple usando Web Audio API
        try {
          const audioContext = new (window.AudioContext || window.webkitAudioContext)();
          const oscillator = audioContext.createOscillator();
          const gainNode = audioContext.createGain();
          
          oscillator.connect(gainNode);
          gainNode.connect(audioContext.destination);
          
          oscillator.frequency.setValueAtTime(523.25, audioContext.currentTime); // C5
          oscillator.frequency.setValueAtTime(659.25, audioContext.currentTime + 0.1); // E5
          oscillator.frequency.setValueAtTime(783.99, audioContext.currentTime + 0.2); // G5
          
          gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
          gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);
          
          oscillator.start(audioContext.currentTime);
          oscillator.stop(audioContext.currentTime + 0.5);
        } catch (e) {
          // Silenciosamente fallar si no se puede reproducir audio
        }
      }
</script>
    
    <!-- TanquiBot Chatbot -->
    <script>
        // Configuraci贸n de reCAPTCHA
        {% if recaptcha_site_key %}
        window.recaptchaSiteKey = '{{ recaptcha_site_key }}';
        {% endif %}
    </script>
    <script src="{{ url_for('static', filename='js/chatbot.js') }}"></script>
    <!-- Bot贸n flotante WhatsApp -->
    <script src="{{ url_for('static', filename='js/whatsapp_float.js') }}"></script>
</body>
</html>
